<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Monet">

<title>mp03.qmd – STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-df2bd1d07bf4883407515dbd16791c74.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#visualizing-and-maintaining-the-green-canopy-of-nyc" id="toc-visualizing-and-maintaining-the-green-canopy-of-nyc" class="nav-link active" data-scroll-target="#visualizing-and-maintaining-the-green-canopy-of-nyc">Visualizing and Maintaining the Green Canopy of NYC</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">INTRODUCTION</a>
  <ul class="collapse">
  <li><a href="#nyc-tree-points" id="toc-nyc-tree-points" class="nav-link" data-scroll-target="#nyc-tree-points">NYC TREE POINTS</a></li>
  </ul></li>
  <li><a href="#data-integration-and-initial-exploration" id="toc-data-integration-and-initial-exploration" class="nav-link" data-scroll-target="#data-integration-and-initial-exploration">Data Integration and Initial Exploration</a></li>
  <li><a href="#district-level-analyses-of-trees" id="toc-district-level-analyses-of-trees" class="nav-link" data-scroll-target="#district-level-analyses-of-trees">District-Level Analyses of Trees</a>
  <ul class="collapse">
  <li><a href="#council-district-with-the-most-trees" id="toc-council-district-with-the-most-trees" class="nav-link" data-scroll-target="#council-district-with-the-most-trees">Council district with the most trees</a></li>
  <li><a href="#the-highest-density-of-trees" id="toc-the-highest-density-of-trees" class="nav-link" data-scroll-target="#the-highest-density-of-trees">The highest density of trees</a></li>
  <li><a href="#district-with-the-highest-fraction-of-dead-trees-out-of-all-trees" id="toc-district-with-the-highest-fraction-of-dead-trees-out-of-all-trees" class="nav-link" data-scroll-target="#district-with-the-highest-fraction-of-dead-trees-out-of-all-trees">District with the highest fraction of dead trees out of all trees</a></li>
  <li><a href="#most-common-tree-species-in-manhattan" id="toc-most-common-tree-species-in-manhattan" class="nav-link" data-scroll-target="#most-common-tree-species-in-manhattan">Most common tree species in Manhattan</a></li>
  <li><a href="#tree-closest-to-baruch-college" id="toc-tree-closest-to-baruch-college" class="nav-link" data-scroll-target="#tree-closest-to-baruch-college">Tree Closest to Baruch College</a></li>
  <li><a href="#government-project-design" id="toc-government-project-design" class="nav-link" data-scroll-target="#government-project-design">Government Project Design</a>
  <ul class="collapse">
  <li><a href="#nyc-parks-proposal-restoring-and-revitalizing-the-urban-canopy-in-council-district-32" id="toc-nyc-parks-proposal-restoring-and-revitalizing-the-urban-canopy-in-council-district-32" class="nav-link" data-scroll-target="#nyc-parks-proposal-restoring-and-revitalizing-the-urban-canopy-in-council-district-32">NYC Parks Proposal: Restoring and Revitalizing the Urban Canopy in Council District 32</a></li>
  <li><a href="#project-scope" id="toc-project-scope" class="nav-link" data-scroll-target="#project-scope">Project Scope</a></li>
  <li><a href="#why-district-32-needs-this-investment" id="toc-why-district-32-needs-this-investment" class="nav-link" data-scroll-target="#why-district-32-needs-this-investment">Why District 32 Needs This Investment</a></li>
  <li><a href="#supporting-visualizations" id="toc-supporting-visualizations" class="nav-link" data-scroll-target="#supporting-visualizations">Supporting Visualizations</a></li>
  <li><a href="#bar-chart-comparing-dead-tree-fractions-districts-32-30-2-50" id="toc-bar-chart-comparing-dead-tree-fractions-districts-32-30-2-50" class="nav-link" data-scroll-target="#bar-chart-comparing-dead-tree-fractions-districts-32-30-2-50">Bar Chart Comparing Dead Tree Fractions (Districts 32, 30, 2, 50)</a></li>
  <li><a href="#zoomed-in-map-of-all-trees-in-district-32" id="toc-zoomed-in-map-of-all-trees-in-district-32" class="nav-link" data-scroll-target="#zoomed-in-map-of-all-trees-in-district-32">Zoomed-In Map of ALL Trees in District 32</a></li>
  <li><a href="#map-comparison-district-32-vs-district-30" id="toc-map-comparison-district-32-vs-district-30" class="nav-link" data-scroll-target="#map-comparison-district-32-vs-district-30">Map Comparison: District 32 vs District 30</a></li>
  <li><a href="#final-table-summary-statistics-for-proposal" id="toc-final-table-summary-statistics-for-proposal" class="nav-link" data-scroll-target="#final-table-summary-statistics-for-proposal">Final Table: Summary Statistics for Proposal</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">mp03.qmd</h1>
</div>



<div class="quarto-title-meta column-page-right">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Monet </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="visualizing-and-maintaining-the-green-canopy-of-nyc" class="level1">
<h1>Visualizing and Maintaining the Green Canopy of NYC</h1>
</section>
<section id="introduction" class="level1">
<h1>INTRODUCTION</h1>
<p>New York City’s street trees are one of the city’s most important environmental assets. They reduce urban heat, improve air quality, absorb stormwater, and contribute to neighborhood livability. Understanding how these trees are distributed and how well they are maintained is essential for guiding equitable investments in NYC’s green canopy.</p>
<p>This project explores the structure and condition of over one million street trees across the five boroughs using spatial data from the NYC Street Tree Census and city council district boundaries. Through spatial joins, density calculations, condition assessments, and proximity measures, we examine patterns of tree health, species distributions, and environmental needs at the district level.</p>
<p>The goal of this analysis is not only to visualize the city’s tree landscape but also to support data-driven recommendations for targeted tree care and investment. Using these results, we design a district-level proposal for the NYC Parks Department that advocates for strategic tree maintenance and planting—grounded in empirical evidence and supported by clear visualizations. # Data Acquisition</p>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.13.1, GDAL 3.11.0, PROJ 9.6.0; sf_use_s2() is TRUE</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>get_nyc_council <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="st">"data/mp03"</span>)) <span class="fu">dir.create</span>(<span class="st">"data/mp03"</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  nycc <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/mp03/nycc.shp"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  nycc <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(nycc, <span class="at">crs =</span> <span class="st">"WGS84"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  nycc <span class="ot">&lt;-</span> nycc <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">geometry =</span> <span class="fu">st_simplify</span>(geometry, <span class="at">dTolerance =</span> <span class="dv">5</span>))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(nycc)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>nycc <span class="ot">&lt;-</span> <span class="fu">get_nyc_council</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `nycc' from data source 
  `C:\Users\saoni\OneDrive\Documents\STA9750-2025-FALL\data\mp03\nycc.shp' 
  using driver `ESRI Shapefile'
Simple feature collection with 51 features and 3 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 913175.1 ymin: 120128.4 xmax: 1067383 ymax: 272844.3
Projected CRS: NAD83 / New York Long Island (ftUS)</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(nycc))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="nyc-tree-points" class="level2">
<h2 class="anchored" data-anchor-id="nyc-tree-points">NYC TREE POINTS</h2>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>get_tree_points <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">limit =</span> <span class="dv">50000</span>, <span class="at">max_pages =</span> <span class="dv">5</span>) {</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  dir_path <span class="ot">&lt;-</span> <span class="st">"data/mp03"</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(dir_path)) <span class="fu">dir.create</span>(dir_path, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  base_url <span class="ot">&lt;-</span> <span class="st">"https://data.cityofnewyork.us/resource/hn5i-inap.geojson"</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  all_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir_path, <span class="at">pattern =</span> <span class="st">"^trees_</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.geojson$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  trees_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  offset <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">repeat</span> {</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    file_name <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"{dir_path}/trees_{offset}.geojson"</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="fu">glue</span>(<span class="st">"Starting batch {i} (offset = {offset})"</span>))</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Only download if not already present</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(file_name)) {</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="fu">glue</span>(<span class="st">"Downloading {file_name} ..."</span>))</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>      resp <span class="ot">&lt;-</span> <span class="fu">request</span>(base_url) <span class="sc">|&gt;</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">req_url_query</span>(<span class="st">`</span><span class="at">$limit</span><span class="st">`</span> <span class="ot">=</span> limit, <span class="st">`</span><span class="at">$offset</span><span class="st">`</span> <span class="ot">=</span> offset) <span class="sc">|&gt;</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">req_perform</span>()</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>      resp_body <span class="ot">&lt;-</span> <span class="fu">resp_body_string</span>(resp)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">writeLines</span>(resp_body, file_name)</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="fu">glue</span>(<span class="st">"Saved {file_name}"</span>))</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="fu">glue</span>(<span class="st">"File {file_name} already exists, skipping download"</span>))</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Try to read data</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>    trees <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>(</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">st_read</span>(file_name, <span class="at">quiet =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>        <span class="fu">message</span>(<span class="fu">glue</span>(<span class="st">"Error reading {file_name}: {e$message}"</span>))</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>        <span class="cn">NULL</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.null</span>(trees) <span class="sc">||</span> <span class="fu">nrow</span>(trees) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">"No more data to download — stopping."</span>)</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="fu">glue</span>(<span class="st">"Read {nrow(trees)} rows."</span>))</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>    trees_list[[i]] <span class="ot">&lt;-</span> trees</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>    offset <span class="ot">&lt;-</span> offset <span class="sc">+</span> limit</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>    i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Stop if fewer rows than the limit (end of dataset)</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">nrow</span>(trees) <span class="sc">&lt;</span> limit) {</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">"Last batch smaller than limit — likely the end of the dataset."</span>)</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i <span class="sc">&gt;</span> max_pages) {</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">"Reached maximum pages allowed for testing (max_pages). Stopping early."</span>)</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">"Combining all downloaded data..."</span>)</span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>  trees_all <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(trees_list)</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="fu">glue</span>(<span class="st">"Combined total: {nrow(trees_all)} rows."</span>)) <span class="co"># Combine all downloaded files</span></span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(trees_all)</span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>trees_sample <span class="ot">&lt;-</span> <span class="fu">get_tree_points</span>(<span class="at">limit =</span> <span class="dv">5000</span>, <span class="at">max_pages =</span> <span class="dv">2</span>) <span class="co">#test run</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 1 (offset = 0)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_0.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 2 (offset = 5000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_5000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 5000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Reached maximum pages allowed for testing (max_pages). Stopping early.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Combining all downloaded data...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Combined total: 55000 rows.</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="st">"data/mp03/trees_0.geojson"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>trees_all <span class="ot">&lt;-</span> <span class="fu">get_tree_points</span>(<span class="at">limit =</span> <span class="dv">50000</span>, <span class="at">max_pages =</span> <span class="dv">999</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 1 (offset = 0)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Downloading data/mp03/trees_0.geojson ...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved data/mp03/trees_0.geojson</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 2 (offset = 50000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_50000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 3 (offset = 1e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_1e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 4 (offset = 150000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_150000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 5 (offset = 2e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_2e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 6 (offset = 250000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_250000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 7 (offset = 3e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_3e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 8 (offset = 350000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_350000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 9 (offset = 4e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_4e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 10 (offset = 450000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_450000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 11 (offset = 5e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_5e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 12 (offset = 550000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_550000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 13 (offset = 6e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_6e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 14 (offset = 650000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_650000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 15 (offset = 7e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_7e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 16 (offset = 750000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_750000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 17 (offset = 8e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_8e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 18 (offset = 850000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_850000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 19 (offset = 9e+05)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_9e+05.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 20 (offset = 950000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_950000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 21 (offset = 1e+06)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_1e+06.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 50000 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting batch 22 (offset = 1050000)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>File data/mp03/trees_1050000.geojson already exists, skipping download</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Read 44587 rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Last batch smaller than limit — likely the end of the dataset.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Combining all downloaded data...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Combined total: 1094587 rows.</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(trees_all)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1094587</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trees_all)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 13 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -74.20904 ymin: 40.51958 xmax: -73.73589 ymax: 40.88763
Geodetic CRS:  WGS 84
  tpcondition stumpdiameter      riskratingdate riskrating objectid
1   Excellent          &lt;NA&gt;                &lt;NA&gt;       &lt;NA&gt;    86823
2        Good          &lt;NA&gt;                &lt;NA&gt;       &lt;NA&gt;    87623
3        Poor          &lt;NA&gt;                &lt;NA&gt;       &lt;NA&gt;    88023
4        Fair          &lt;NA&gt; 2024-06-28 12:41:55          6    88823
5        Dead          &lt;NA&gt;                &lt;NA&gt;       &lt;NA&gt;    88824
6        Fair          &lt;NA&gt;                &lt;NA&gt;       &lt;NA&gt;    88825
                              globalid tpstructure
1 2B457A4C-E0E4-4E17-81C4-A5449F51C804        Full
2 37195E1A-A7EE-4AA4-8389-19A0ED5C46F7     Retired
3 6BA8E72B-1901-4EF3-ABFF-D11680AB4A9B     Retired
4 79A5DBAF-F305-4DA1-A4B1-7A8C8D085435        Full
5 182F6647-D9C1-4A45-ADA0-9ADEFD1ECC60     Retired
6 394AEC59-B91C-45AD-93FB-2996B0C09747     Retired
                 plantingspaceglobalid         createddate dbh planteddate
1 E814CD37-9F53-4D79-AF86-3B454F9D29B9 2015-02-28 05:00:00  20        &lt;NA&gt;
2 A644AB79-A3CB-4F7F-923B-F308E615CCD4 2015-03-03 05:00:00  10        &lt;NA&gt;
3 21431016-EDB8-4A0B-B122-673125800C87 2015-03-03 05:00:00  24        &lt;NA&gt;
4 96FB6C55-612F-466D-9449-85A3CD2178E1 2015-03-04 05:00:00  10        &lt;NA&gt;
5 4796B64F-906C-4345-A4E9-5CD6133642F8 2015-03-04 05:00:00  10        &lt;NA&gt;
6 F31930BA-47FD-4D9F-B8A2-7A4FA4707D16 2015-03-04 05:00:00  19        &lt;NA&gt;
          updateddate
1 2016-10-20 17:43:53
2 2019-09-18 13:12:55
3 2018-03-27 14:00:42
4 2024-06-28 12:41:55
5 2016-10-24 02:50:43
6 2017-04-12 09:35:50
                                                genusspecies
1                                  Acer nigrum - black maple
2                         Fraxinus pennsylvanica - Green ash
3                            Acer platanoides - Norway maple
4                            Pyrus calleryana - Callery pear
5 Gleditsia triacanthos var. inermis - Thornless honeylocust
6                             Fraxinus americana - white ash
                    geometry
1 POINT (-73.81657 40.71629)
2 POINT (-73.93848 40.81299)
3 POINT (-73.83244 40.88763)
4 POINT (-74.20904 40.51958)
5 POINT (-73.98032 40.74291)
6  POINT (-73.73589 40.7359)</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatial join: assign each tree to a council district</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>trees_by_district <span class="ot">&lt;-</span> <span class="fu">st_join</span>(trees_all, nycc, <span class="at">join =</span> st_within)</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many trees per district</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>tree_counts <span class="ot">&lt;-</span> trees_by_district <span class="sc">%&gt;%</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CounDist) <span class="sc">%&gt;%</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">tree_count =</span> <span class="fu">n</span>())</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="co"># See the first few results</span></span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tree_counts)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  CounDist tree_count
     &lt;int&gt;      &lt;int&gt;
1        1      12266
2        2      11562
3        3      11999
4        4      11099
5        5       8325
6        6      12140</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge back with nycc to plot</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>nycc_with_counts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nycc, tree_counts, <span class="at">by =</span> <span class="st">"CounDist"</span>)</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot map of tree counts per district</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nycc_with_counts[<span class="st">"tree_count"</span>], <span class="at">main =</span> <span class="st">"Tree Count per NYC Council District"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="data-integration-and-initial-exploration" class="level1">
<h1>Data Integration and Initial Exploration</h1>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nycc, <span class="at">fill =</span> <span class="st">"gray95"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">0.3</span>) <span class="sc">+</span>  <span class="co"># council district boundaries</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> trees_all, </span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">"forestgreen"</span>, </span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">alpha =</span> <span class="fl">0.3</span>, </span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">size =</span> <span class="fl">0.05</span>) <span class="sc">+</span>  <span class="co"># tree points</span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"NYC Street Trees by City Council District"</span>,</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data: NYC OpenData &amp; NYC Department of Planning"</span></span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="district-level-analyses-of-trees" class="level1">
<h1>District-Level Analyses of Trees</h1>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>trees_joined <span class="ot">&lt;-</span> <span class="fu">st_join</span>(trees_all, nycc, <span class="at">join =</span> st_intersects)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="council-district-with-the-most-trees" class="level3">
<h3 class="anchored" data-anchor-id="council-district-with-the-most-trees">Council district with the most trees</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>trees_joined <span class="sc">|&gt;</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(CounDist) <span class="sc">|&gt;</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 52 features and 2 fields
Geometry type: MULTIPOINT
Dimension:     XY
Bounding box:  xmin: -74.25499 ymin: 40.49668 xmax: -73.69808 ymax: 40.91419
Geodetic CRS:  WGS 84
First 10 features:
   CounDist     n                       geometry
1        51 70965 MULTIPOINT ((-74.12399 40.5...
2        50 52509 MULTIPOINT ((-74.0244 40.61...
3        19 49941 MULTIPOINT ((-73.84794 40.7...
4        23 44949 MULTIPOINT ((-73.77758 40.7...
5        13 36659 MULTIPOINT ((-73.83289 40.8...
6        49 35113 MULTIPOINT ((-74.13103 40.6...
7        39 32436 MULTIPOINT ((-73.97845 40.6...
8        31 31348 MULTIPOINT ((-73.75148 40.6...
9        32 30292 MULTIPOINT ((-73.87193 40.5...
10       27 29365 MULTIPOINT ((-73.80668 40.7...</code></pre>
</div>
</div>
<p>District 51 has the most trees (70,965 trees).</p>
</section>
<section id="the-highest-density-of-trees" class="level3">
<h3 class="anchored" data-anchor-id="the-highest-density-of-trees">The highest density of trees</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>tree_density <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(CounDist) <span class="sc">|&gt;</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>    nycc <span class="sc">|&gt;</span> <span class="fu">st_drop_geometry</span>() <span class="sc">|&gt;</span> <span class="fu">select</span>(CounDist, Shape_Area),</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"CounDist"</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">density =</span> n <span class="sc">/</span> Shape_Area) <span class="sc">|&gt;</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(density))</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>tree_density</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 52 features and 4 fields
Geometry type: MULTIPOINT
Dimension:     XY
Bounding box:  xmin: -74.25499 ymin: 40.49668 xmax: -73.69808 ymax: 40.91419
Geodetic CRS:  WGS 84
First 10 features:
   CounDist     n Shape_Area      density                       geometry
1         7 15639   55186140 0.0002833864 MULTIPOINT ((-73.97426 40.7...
2        39 32436  118294553 0.0002741969 MULTIPOINT ((-73.97845 40.6...
3         2 11562   48322121 0.0002392693 MULTIPOINT ((-73.98039 40.7...
4         9 13455   56263769 0.0002391415 MULTIPOINT ((-73.93566 40.8...
5         5  8325   37752246 0.0002205167 MULTIPOINT ((-73.95612 40.7...
6        16 13490   62082481 0.0002172916 MULTIPOINT ((-73.91697 40.8...
7        14 10904   52585062 0.0002073593 MULTIPOINT ((-73.88697 40.8...
8        10 15300   76997844 0.0001987069 MULTIPOINT ((-73.91238 40.8...
9        35 15110   79440619 0.0001902050 MULTIPOINT ((-73.98353 40.7...
10       41 14416   79271987 0.0001818549 MULTIPOINT ((-73.9361 40.65...</code></pre>
</div>
</div>
<p>Council District 7 has the highest density of trees</p>
</section>
<section id="district-with-the-highest-fraction-of-dead-trees-out-of-all-trees" class="level3">
<h3 class="anchored" data-anchor-id="district-with-the-highest-fraction-of-dead-trees-out-of-all-trees">District with the highest fraction of dead trees out of all trees</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(trees_joined)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "tpcondition"           "stumpdiameter"         "riskratingdate"       
 [4] "riskrating"            "objectid"              "globalid"             
 [7] "tpstructure"           "plantingspaceglobalid" "createddate"          
[10] "dbh"                   "planteddate"           "updateddate"          
[13] "genusspecies"          "CounDist"              "Shape_Leng"           
[16] "Shape_Area"            "geometry"             </code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(trees_joined<span class="sc">$</span>tpcondition)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Excellent" "Good"      "Poor"      "Fair"      "Dead"      "Critical" 
[7] "Unknown"   NA         </code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>dead_by_district <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CounDist) <span class="sc">|&gt;</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">n</span>(),</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">dead =</span> <span class="fu">sum</span>(tpcondition <span class="sc">==</span> <span class="st">"Dead"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">frac_dead =</span> dead <span class="sc">/</span> total</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(frac_dead))</span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>dead_by_district</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 52 features and 4 fields
Geometry type: MULTIPOINT
Dimension:     XY
Bounding box:  xmin: -74.25499 ymin: 40.49668 xmax: -73.69808 ymax: 40.91419
Geodetic CRS:  WGS 84
# A tibble: 52 × 5
   CounDist total  dead frac_dead                                       geometry
      &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;                               &lt;MULTIPOINT [°]&gt;
 1       32 30292  4316     0.142 ((-73.87193 40.57096), (-73.87198 40.57101), …
 2       30 23013  3231     0.140 ((-73.9011 40.70054), (-73.90123 40.70055), (…
 3        2 11562  1574     0.136 ((-73.98039 40.74564), (-73.98042 40.74559), …
 4       50 52509  7088     0.135 ((-74.0244 40.61755), (-74.0244 40.61755), (-…
 5       29 19971  2688     0.135 ((-73.84195 40.68533), (-73.84196 40.68608), …
 6       16 13490  1782     0.132 ((-73.91697 40.85753), (-73.91701 40.85555), …
 7       23 44949  5905     0.131 ((-73.77758 40.72296), (-73.77753 40.72298), …
 8       49 35113  4584     0.131 ((-74.13103 40.60389), (-74.13082 40.6039), (…
 9       11 27851  3626     0.130 ((-73.84051 40.90053), (-73.84063 40.90051), …
10       20 20717  2697     0.130 ((-73.8309 40.77231), (-73.83016 40.77279), (…
# ℹ 42 more rows</code></pre>
</div>
</div>
<p>the district with the highest fraction of dead trees is Council District 32</p>
</section>
<section id="most-common-tree-species-in-manhattan" class="level3">
<h3 class="anchored" data-anchor-id="most-common-tree-species-in-manhattan">Most common tree species in Manhattan</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>trees_joined <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">borough =</span> <span class="fu">case_when</span>(</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(CounDist, <span class="dv">1</span>, <span class="dv">10</span>) <span class="sc">~</span> <span class="st">"Manhattan"</span>,</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(CounDist, <span class="dv">11</span>, <span class="dv">18</span>) <span class="sc">~</span> <span class="st">"Bronx"</span>,</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(CounDist, <span class="dv">19</span>, <span class="dv">32</span>) <span class="sc">~</span> <span class="st">"Queens"</span>,</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(CounDist, <span class="dv">33</span>, <span class="dv">48</span>) <span class="sc">~</span> <span class="st">"Brooklyn"</span>,</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(CounDist, <span class="dv">49</span>, <span class="dv">51</span>) <span class="sc">~</span> <span class="st">"Staten Island"</span>,</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>  manhattan_species <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span></span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(borough <span class="sc">==</span> <span class="st">"Manhattan"</span>) <span class="sc">|&gt;</span></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(genusspecies) <span class="sc">|&gt;</span></span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a>manhattan_species</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 458 features and 2 fields
Geometry type: GEOMETRY
Dimension:     XY
Bounding box:  xmin: -74.01882 ymin: 40.69303 xmax: -73.90245 ymax: 40.879
Geodetic CRS:  WGS 84
First 10 features:
                                                 genusspecies     n
1  Gleditsia triacanthos var. inermis - Thornless honeylocust 17310
2                    Platanus x acerifolia - London planetree 11593
3                             Pyrus calleryana - Callery pear  8793
4                                 Quercus palustris - pin oak  8103
5                             Ginkgo biloba - maidenhair tree  7456
6                          Zelkova serrata - Japanese zelkova  5770
7              Styphnolobium japonicum - Japanese pagoda tree  5435
8                           Tilia cordata - littleleaf linden  4417
9                                           Unknown - Unknown  3758
10                             Ulmus americana - American elm  3523
                         geometry
1  MULTIPOINT ((-73.99517 40.7...
2  MULTIPOINT ((-73.99488 40.7...
3  MULTIPOINT ((-74.00102 40.7...
4  MULTIPOINT ((-73.99616 40.7...
5  MULTIPOINT ((-74.00173 40.7...
6  MULTIPOINT ((-73.99521 40.7...
7  MULTIPOINT ((-73.996 40.767...
8  MULTIPOINT ((-73.99529 40.7...
9  MULTIPOINT ((-73.99489 40.7...
10 MULTIPOINT ((-73.99613 40.7...</code></pre>
</div>
</div>
<p>Thornless honeylocust (Gleditsia triacanthos var. inermis)</p>
</section>
<section id="tree-closest-to-baruch-college" class="level3">
<h3 class="anchored" data-anchor-id="tree-closest-to-baruch-college">Tree Closest to Baruch College</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>baruch <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>(<span class="fu">st_point</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="fl">73.9830</span>, <span class="fl">40.7403</span>)), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>trees_with_dist <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">distance =</span> <span class="fu">st_distance</span>(geometry, baruch))</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>trees_with_dist <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">distance =</span> <span class="fu">st_distance</span>(geometry, baruch))</span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>closest_tree <span class="ot">&lt;-</span> trees_with_dist <span class="sc">|&gt;</span></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(distance) <span class="sc">|&gt;</span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(genusspecies, tpcondition, dbh, distance)</span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a>closest_tree</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 1 feature and 4 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -73.98293 ymin: 40.74036 xmax: -73.98293 ymax: 40.74036
Geodetic CRS:  WGS 84
                          genusspecies tpcondition dbh     distance
167719 Pyrus calleryana - Callery pear        Fair   7 8.492875 [m]
                         geometry
167719 POINT (-73.98293 40.74036)</code></pre>
</div>
</div>
<p>The closest tree to Baruch College is Callery pear (Pyrus calleryana)</p>
</section>
<section id="government-project-design" class="level2">
<h2 class="anchored" data-anchor-id="government-project-design">Government Project Design</h2>
<section id="nyc-parks-proposal-restoring-and-revitalizing-the-urban-canopy-in-council-district-32" class="level3">
<h3 class="anchored" data-anchor-id="nyc-parks-proposal-restoring-and-revitalizing-the-urban-canopy-in-council-district-32">NYC Parks Proposal: Restoring and Revitalizing the Urban Canopy in Council District 32</h3>
<p>Project Overview</p>
<p>Council District 32 has one of the largest tree populations in New York City — but it also carries the highest fraction of dead trees (14.2%) across all 52 districts. Dead street trees present safety hazards, reduce shade coverage during extreme heat, and diminish overall neighborhood quality of life.</p>
<p>This proposal requests targeted funding for a District 32 Tree Renewal Program, aimed at removing dead/dangerous trees and replacing them with climate-resilient species that strengthen our district’s tree canopy.</p>
</section>
<section id="project-scope" class="level3">
<h3 class="anchored" data-anchor-id="project-scope">Project Scope</h3>
<p>We propose the following activities for the upcoming planting cycle:</p>
<p>Remove 4,316 dead trees (based on latest NYC Street Trees data)</p>
<p>Grind and clear associated stumps (approximately 4,300 sites)</p>
<p>Plant 5,000 new climate-resilient trees, prioritizing species with strong survival rates such as thornless honeylocust, Japanese zelkova, and American elm</p>
<p>Perform risk assessments on an additional 1,000 trees classified as “Poor,” “Critical,” or “Unknown” condition in the tpcondition dataset</p>
<p>This scope focuses on stabilizing canopy health while ensuring long-term benefits for residents across Ozone Park, Howard Beach, and Rockaway neighborhoods.</p>
</section>
<section id="why-district-32-needs-this-investment" class="level3">
<h3 class="anchored" data-anchor-id="why-district-32-needs-this-investment">Why District 32 Needs This Investment</h3>
<p>District 32 stands out compared to other districts on several critical metrics:</p>
<ol type="1">
<li>Highest Proportion of Dead Trees</li>
</ol>
<p>District 32: 14.2% dead trees</p>
<p>District 30: 14.0%</p>
<p>District 2: 13.6%</p>
<p>District 50: 13.5%</p>
<p>District 32 leads the entire city in this category, indicating an urgent need for maintenance and replanting.</p>
<ol start="2" type="1">
<li>Large Overall Tree Population</li>
</ol>
<p>District 32 has 30,292 trees, placing it among the top ten districts in total canopy size. Investing in maintenance here yields large, citywide environmental returns.</p>
<ol start="3" type="1">
<li>High Exposure to Extreme Weather</li>
</ol>
<p>Much of District 32 lies along the coastline (Rockaways, Broad Channel), where trees experience:</p>
<p>stronger winds</p>
<p>increased flooding</p>
<p>salt exposure</p>
<p>These accelerate decline and increase the need for routine replacement.</p>
<p>Conclusion</p>
<p>District 32’s combination of the highest proportion of dead trees, a substantial existing canopy, and greater environmental vulnerabilities makes it the best candidate for a concentrated investment. Funding the Tree Renewal Program will remove safety hazards, expand shade during summer heat, and revitalize one of NYC’s most environmentally stressed districts.</p>
<p>We respectfully request that NYC Parks allocate dedicated funding to launch this initiative in the upcoming fiscal year.</p>
</section>
<section id="supporting-visualizations" class="level3">
<h3 class="anchored" data-anchor-id="supporting-visualizations">Supporting Visualizations</h3>
<section id="dead-trees-table" class="level4">
<h4 class="anchored" data-anchor-id="dead-trees-table">Dead Trees Table</h4>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>dead_by_district <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CounDist) <span class="sc">|&gt;</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="fu">n</span>(),</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">dead =</span> <span class="fu">sum</span>(tpcondition <span class="sc">==</span> <span class="st">"Dead"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">frac_dead =</span> dead <span class="sc">/</span> total</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(frac_dead))</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>dead_by_district</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 52 features and 4 fields
Geometry type: MULTIPOINT
Dimension:     XY
Bounding box:  xmin: -74.25499 ymin: 40.49668 xmax: -73.69808 ymax: 40.91419
Geodetic CRS:  WGS 84
# A tibble: 52 × 5
   CounDist total  dead frac_dead                                       geometry
      &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;                               &lt;MULTIPOINT [°]&gt;
 1       32 30292  4316     0.142 ((-73.87193 40.57096), (-73.87198 40.57101), …
 2       30 23013  3231     0.140 ((-73.9011 40.70054), (-73.90123 40.70055), (…
 3        2 11562  1574     0.136 ((-73.98039 40.74564), (-73.98042 40.74559), …
 4       50 52509  7088     0.135 ((-74.0244 40.61755), (-74.0244 40.61755), (-…
 5       29 19971  2688     0.135 ((-73.84195 40.68533), (-73.84196 40.68608), …
 6       16 13490  1782     0.132 ((-73.91697 40.85753), (-73.91701 40.85555), …
 7       23 44949  5905     0.131 ((-73.77758 40.72296), (-73.77753 40.72298), …
 8       49 35113  4584     0.131 ((-74.13103 40.60389), (-74.13082 40.6039), (…
 9       11 27851  3626     0.130 ((-73.84051 40.90053), (-73.84063 40.90051), …
10       20 20717  2697     0.130 ((-73.8309 40.77231), (-73.83016 40.77279), (…
# ℹ 42 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="bar-chart-comparing-dead-tree-fractions-districts-32-30-2-50" class="level3">
<h3 class="anchored" data-anchor-id="bar-chart-comparing-dead-tree-fractions-districts-32-30-2-50">Bar Chart Comparing Dead Tree Fractions (Districts 32, 30, 2, 50)</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>compare_districts <span class="ot">&lt;-</span> dead_by_district <span class="sc">|&gt;</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CounDist <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">30</span>, <span class="dv">2</span>, <span class="dv">50</span>)) <span class="sc">|&gt;</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CounDist =</span> <span class="fu">factor</span>(CounDist))</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(compare_districts, <span class="fu">aes</span>(<span class="at">x =</span> CounDist, <span class="at">y =</span> frac_dead)) <span class="sc">+</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"forestgreen"</span>) <span class="sc">+</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(frac_dead, <span class="at">accuracy =</span> <span class="fl">0.1</span>)),</span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Fraction of Dead Trees Across Selected Districts"</span>,</span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Council District"</span>,</span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Fraction Dead"</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="zoomed-in-map-of-all-trees-in-district-32" class="level3">
<h3 class="anchored" data-anchor-id="zoomed-in-map-of-all-trees-in-district-32">Zoomed-In Map of ALL Trees in District 32</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>district32_poly <span class="ot">&lt;-</span> nycc <span class="sc">|&gt;</span> <span class="fu">filter</span>(CounDist <span class="sc">==</span> <span class="dv">32</span>)</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>trees_d32 <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span> <span class="fu">filter</span>(CounDist <span class="sc">==</span> <span class="dv">32</span>)</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> district32_poly, <span class="at">fill =</span> <span class="st">"gray90"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> trees_d32, <span class="fu">aes</span>(<span class="at">color =</span> tpcondition), <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Excellent"</span> <span class="ot">=</span> <span class="st">"darkgreen"</span>,</span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Good"</span>      <span class="ot">=</span> <span class="st">"green3"</span>,</span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Fair"</span>      <span class="ot">=</span> <span class="st">"gold"</span>,</span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Poor"</span>      <span class="ot">=</span> <span class="st">"orange"</span>,</span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Critical"</span>  <span class="ot">=</span> <span class="st">"red"</span>,</span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Dead"</span>      <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb119-16"><a href="#cb119-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Unknown"</span>   <span class="ot">=</span> <span class="st">"gray60"</span></span>
<span id="cb119-17"><a href="#cb119-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb119-18"><a href="#cb119-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb119-19"><a href="#cb119-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb119-20"><a href="#cb119-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Tree Map of Council District 32"</span>,</span>
<span id="cb119-21"><a href="#cb119-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Condition categories based on tpcondition"</span>,</span>
<span id="cb119-22"><a href="#cb119-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Tree Condition"</span></span>
<span id="cb119-23"><a href="#cb119-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb119-24"><a href="#cb119-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="map-comparison-district-32-vs-district-30" class="level3">
<h3 class="anchored" data-anchor-id="map-comparison-district-32-vs-district-30">Map Comparison: District 32 vs District 30</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'patchwork' was built under R version 4.5.2</code></pre>
</div>
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>district30_poly <span class="ot">&lt;-</span> nycc <span class="sc">|&gt;</span> <span class="fu">filter</span>(CounDist <span class="sc">==</span> <span class="dv">30</span>)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>trees_d30 <span class="ot">&lt;-</span> trees_joined <span class="sc">|&gt;</span> <span class="fu">filter</span>(CounDist <span class="sc">==</span> <span class="dv">30</span>)</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> district32_poly, <span class="at">fill =</span> <span class="st">"gray95"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> trees_d32 <span class="sc">|&gt;</span> <span class="fu">filter</span>(tpcondition <span class="sc">==</span> <span class="st">"Dead"</span>),</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">0.6</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"District 32 — Dead Trees"</span>) <span class="sc">+</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="cn">NA</span>)) <span class="ot">-&gt;</span> map32</span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> district30_poly, <span class="at">fill =</span> <span class="st">"gray95"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> trees_d30 <span class="sc">|&gt;</span> <span class="fu">filter</span>(tpcondition <span class="sc">==</span> <span class="st">"Dead"</span>),</span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">0.6</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"District 30 — Dead Trees"</span>) <span class="sc">+</span></span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="cn">NA</span>)) <span class="ot">-&gt;</span> map30</span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a>map32 <span class="sc">+</span> map30</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="final-table-summary-statistics-for-proposal" class="level3">
<h3 class="anchored" data-anchor-id="final-table-summary-statistics-for-proposal">Final Table: Summary Statistics for Proposal</h3>
<div class="cell">
<details class="code-fold">
<summary>Show/Hide Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>summary_table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">District =</span> <span class="dv">32</span>,</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Total_Trees =</span> dead_by_district<span class="sc">$</span>total[dead_by_district<span class="sc">$</span>CounDist <span class="sc">==</span> <span class="dv">32</span>],</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Dead_Trees =</span> dead_by_district<span class="sc">$</span>dead[dead_by_district<span class="sc">$</span>CounDist <span class="sc">==</span> <span class="dv">32</span>],</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percent_Dead =</span> dead_by_district<span class="sc">$</span>frac_dead[dead_by_district<span class="sc">$</span>CounDist <span class="sc">==</span> <span class="dv">32</span>]</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>summary_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  District Total_Trees Dead_Trees Percent_Dead
     &lt;dbl&gt;       &lt;int&gt;      &lt;int&gt;        &lt;dbl&gt;
1       32       30292       4316        0.142
2       32          NA         NA       NA    </code></pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/monet0102\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>